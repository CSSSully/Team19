<?php
session_start();

// Database configuration
$servername = "localhost";
$dbusername = "root";
$dbpassword = "";
$dbname = "user_db";

// Create connection
$conn = new mysqli($servername, $dbusername, $dbpassword, $dbname);

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// ADMIN FUNCTIONS
function isAdminLoggedIn() {
    return isset($_SESSION['admin_logged_in']) && $_SESSION['admin_logged_in'] === true;
}

// Admin login
if (isset($_POST['admin_login'])) {
    $username = $conn->real_escape_string($_POST['username']);
    $password = $_POST['password'];
    
    $sql = "SELECT * FROM admins WHERE username = '$username' AND password = '$password'";
    $result = $conn->query($sql);
    
    if ($result->num_rows > 0) {
        $_SESSION['admin_logged_in'] = true;
    } else {
        $admin_login_error = "Invalid admin credentials";
    }
}

// Add new user
if (isset($_POST['add_user']) && isAdminLoggedIn()) {
    $username = $conn->real_escape_string($_POST['new_username']);
    $email = $conn->real_escape_string($_POST['new_email']);
    $password = password_hash($_POST['new_password'], PASSWORD_DEFAULT);
    
    $sql = "INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$password')";
    
    if ($conn->query($sql)) {
        $add_success = "User added successfully!";
    } else {
        $add_error = "Error adding user: " . $conn->error;
    }
}

// Remove user
if (isset($_GET['delete_user']) && isAdminLoggedIn()) {
    $user_id = (int)$_GET['delete_user'];
    
    $sql = "DELETE FROM users WHERE id = $user_id";
    
    if ($conn->query($sql)) {
        $delete_success = "User deleted successfully!";
    } else {
        $delete_error = "Error deleting user: " . $conn->error;
    }
}

// Get all users for admin panel
if (isAdminLoggedIn()) {
    $users = $conn->query("SELECT id, username, email FROM users");
}
?>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rakusens Admin</title>
  <link rel="stylesheet" href="admin.css">
</head>
<body>
  <!-- Toggle Switch -->
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox">
      <div class="slider round"></div>
    </label>
    <span></span>
  </div>

  <div class="top-section">
    <div class="banner-container">
      <img src="images/rakusensbanner-4-1024x256.png" class="banner-img">
    </div>

    <div class="logo-container">
      <h1>Rakusen's Admin Panel</h1>
    </div>
  </div>

  <main class="admin-content">
    <?php if (!isAdminLoggedIn()): ?>
      <!-- Admin Login Form -->
      <section class="admin-login-section">
        <h2 class="section-title">Admin Login</h2>
        <?php if (isset($admin_login_error)): ?>
          <div class="notification error"><?php echo $admin_login_error; ?></div>
        <?php endif; ?>
        <form method="post" class="admin-form">
          <div class="form-group">
            <label for="username" class="form-label">Username:</label>
            <input type="text" id="username" name="username" class="form-input" required>
          </div>
          <div class="form-group">
            <label for="password" class="form-label">Password:</label>
            <input type="password" id="password" name="password" class="form-input" required>
          </div>
          <button type="submit" name="admin_login" class="btn login-btn">Login</button>
        </form>
      </section>
    <?php else: ?>
      <!-- Admin Content -->
      <section class="admin-panel-section">
        <div class="admin-header">
          <h2 class="section-title">User Management</h2>
          <a href="?logout=1" class="btn logout-btn">Logout</a>
        </div>
        
        <!-- Add User Form -->
        <div class="add-user-section">
          <h3 class="subsection-title">Add New User</h3>
          <?php if (isset($add_success)): ?>
            <div class="notification success"><?php echo $add_success; ?></div>
          <?php endif; ?>
          <?php if (isset($add_error)): ?>
            <div class="notification error"><?php echo $add_error; ?></div>
          <?php endif; ?>
          <form method="post" class="admin-form">
            <div class="form-group">
              <label for="new_username" class="form-label">Username:</label>
              <input type="text" id="new_username" name="new_username" class="form-input" required>
            </div>
            <div class="form-group">
              <label for="new_email" class="form-label">Email:</label>
              <input type="email" id="new_email" name="new_email" class="form-input" required>
            </div>
            <div class="form-group">
              <label for="new_password" class="form-label">Password:</label>
              <input type="password" id="new_password" name="new_password" class="form-input" required>
            </div>
            <button type="submit" name="add_user" class="btn add-user-btn">Add User</button>
          </form>
        </div>
        
        <!-- User List -->
        <div class="user-list-section">
          <h3 class="subsection-title">Current Users</h3>
          <?php if (isset($delete_success)): ?>
            <div class="notification success"><?php echo $delete_success; ?></div>
          <?php endif; ?>
          <?php if (isset($delete_error)): ?>
            <div class="notification error"><?php echo $delete_error; ?></div>
          <?php endif; ?>
          <table class="user-table">
            <thead>
              <tr>
                <th class="table-header">ID</th>
                <th class="table-header">Username</th>
                <th class="table-header">Email</th>
                <th class="table-header">Action</th>
              </tr>
            </thead>
            <tbody>
              <?php while ($user = $users->fetch_assoc()): ?>
                <tr class="table-row">
                  <td class="table-data"><?php echo $user['id']; ?></td>
                  <td class="table-data"><?php echo htmlspecialchars($user['username']); ?></td>
                  <td class="table-data"><?php echo htmlspecialchars($user['email']); ?></td>
                  <td class="table-data">
                    <a href="?delete_user=<?php echo $user['id']; ?>" 
                       class="action-link"
                       onclick="return confirm('Are you sure you want to delete this user?')">
                      Delete
                    </a>
                  </td>
                </tr>
              <?php endwhile; ?>
            </tbody>
          </table>
        </div>
      </section>
    <?php endif; ?>
  </main>

  <script>
    // Theme switching functionality
    const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
    
    function switchTheme(e) {
      if (e.target.checked) {
        document.documentElement.setAttribute('data-theme', 'dark');
      } else {
        document.documentElement.setAttribute('data-theme', 'light');
      }    
    }
    
    toggleSwitch.addEventListener('change', switchTheme, false);
  </script>
</body>
</html>






CSS

/* ADMIN PANEL STYLES */
.admin-content {
  max-width: 1200px;
  margin: 2rem auto;
  padding: 1rem;
}

.admin-login-section,
.admin-panel-section {
  background: var(--panel-bg, #ffffff);
  padding: 2rem;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  margin-bottom: 2rem;
}

.section-title {
  color: var(--primary-color, #2c3e50);
  margin-bottom: 1.5rem;
}

.subsection-title {
  color: var(--secondary-color, #34495e);
  margin: 1.5rem 0 1rem;
}

.admin-form {
  display: grid;
  gap: 1rem;
  max-width: 600px;
}

.form-group {
  display: grid;
  gap: 0.5rem;
}

.form-label {
  font-weight: 600;
  color: var(--text-color, #333);
}

.form-input {
  padding: 0.75rem;
  border: 1px solid var(--border-color, #ddd);
  border-radius: 4px;
  font-size: 1rem;
}

.btn {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 4px;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color 0.3s;
}

.login-btn {
  background-color: var(--primary-btn-bg, #3498db);
  color: white;
}

.logout-btn {
  background-color: var(--danger-btn-bg, #e74c3c);
  color: white;
}

.add-user-btn {
  background-color: var(--success-btn-bg, #2ecc71);
  color: white;
}

.notification {
  padding: 1rem;
  margin: 1rem 0;
  border-radius: 4px;
}

.notification.success {
  background-color: var(--success-bg, #d4edda);
  color: var(--success-text, #155724);
}

.notification.error {
  background-color: var(--error-bg, #f8d7da);
  color: var(--error-text, #721c24);
}

.user-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 1rem;
}

.table-header {
  background-color: var(--table-header-bg, #f2f2f2);
  padding: 1rem;
  text-align: left;
  font-weight: 600;
}

.table-row:nth-child(even) {
  background-color: var(--table-row-even, #f9f9f9);
}

.table-data {
  padding: 1rem;
  border-bottom: 1px solid var(--border-color, #ddd);
}

.action-link {
  color: var(--danger-btn-bg, #e74c3c);
  text-decoration: none;
}

.action-link:hover {
  text-decoration: underline;
}

/* Add these to your existing theme variables */
[data-theme="dark"] {
  --panel-bg: #2c3e50;
  --primary-color: #ecf0f1;
  --secondary-color: #bdc3c7;
  --text-color: #ecf0f1;
  --border-color: #34495e;
  --table-header-bg: #34495e;
  --table-row-even: #34495e;
}
